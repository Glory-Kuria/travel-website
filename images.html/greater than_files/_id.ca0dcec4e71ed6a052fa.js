(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1460:function(e,t,r){"use strict";r(15),r(12),r(13),r(6),r(17),r(14),r(18);var n=r(7),o=r(4),l=(r(47),r(27));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a={data:function(){return{gettingSameStyleIllustrations:!0,gettingRelatedCategories:!0,relatedCategories:[],sameStyleIllustrations:[],totalRelatedCategories:0,totalSameStyle:0}},computed:d({},Object(l.e)({userId:function(e){var t;return(null===(t=e.auth.user)||void 0===t?void 0:t.id)||""}})),methods:{getSimilarsAndRelated:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getSameStyleIllustrations(),null!==(r=e.illustration)&&void 0!==r&&r.id){t.next=4;break}return e.gettingRelatedCategories=!1,t.abrupt("return");case 4:e.getRelatedCategories(),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getSameStyleIllustrations:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,y,v,f,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(r=e.illustration)&&void 0!==r&&null!==(n=r.styles)&&void 0!==n&&n.length){t.next=3;break}return e.gettingSameStyleIllustrations=!1,t.abrupt("return");case 3:return l=e.illustration.styles[0].pretty_id,c={page:1,per_page:50,style_pretty_ids:l,locale:e.locale},y=d(d({},c),{},{id:e.illustration.id,userId:e.userId,type:"similars"}),e.gettingSameStyleIllustrations=!0,t.prev=7,t.next=10,e.$store.dispatch("cache/get",{key:y});case 10:if(!(h=t.sent)){t.next=15;break}o=h,t.next=20;break;case 15:return m=e.illustration.id,t.next=18,e.$illustrationsRepository.show(m,c,"similars");case 18:o=t.sent,e.$store.dispatch("cache/set",{key:y,value:o});case 20:e.sameStyleIllustrations=(null===(v=o)||void 0===v?void 0:v.illustrations)||[],e.totalSameStyle=(null===(f=o)||void 0===f?void 0:f.total)||0,t.next=27;break;case 24:t.prev=24,t.t0=t.catch(7),console.error(t.t0);case 27:return t.prev=27,e.gettingSameStyleIllustrations=!1,t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[7,24,27,30]])})))()},getRelatedCategories:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={related_illustration_id:e.illustration.id,page:1,per_page:8,random_previews_count:4,locale:e.locale},o=d(d({},n),{},{keyType:"related"}),e.gettingRelatedCategories=!0,t.prev=3,t.next=6,e.$store.dispatch("cache/get",{key:o});case 6:if(!(y=t.sent)){t.next=11;break}r=y,t.next=15;break;case 11:return t.next=13,e.$categoriesPreviewsRepository.index(n);case 13:r=t.sent,e.$store.dispatch("cache/set",{key:o,value:r});case 15:e.relatedCategories=(null===(l=r)||void 0===l?void 0:l.categories)||[],e.totalRelatedCategories=(null===(c=r)||void 0===c?void 0:c.total)||0,t.next=22;break;case 19:t.prev=19,t.t0=t.catch(3),console.error(t.t0);case 22:return t.prev=22,e.gettingRelatedCategories=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[3,19,22,25]])})))()}}}},1666:function(e,t,r){"use strict";r.r(t);r(15),r(12),r(13),r(6),r(17),r(14),r(18);var n=r(4),o=r(7),l=(r(47),r(19),r(52),r(20),r(46)),c=r(471),d=r(1460);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"IllustrationPage",mixins:[c.a,d.a],layout:"content",asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,y,f,h,m,O,S,w,j,R,k,x,I,P,_,C,style,E,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.params,n=e.app,o=e.error,c=e.route,d=e.store,e.res,y=e.redirect,f="secret"in c.query?c.query.secret:"",h=n.i18n.localeProperties.iso,t.prev=3,d.state.categories.all.length){t.next=9;break}return t.next=7,n.$categoriesRepository.index({locale:h});case 7:R=t.sent,d.commit("CATEGORIES_SET",(null==R?void 0:R.categories)||[]);case 9:return k=r.id.replace(/--animated$/,""),I={locale:h},t.prev=11,t.next=14,d.dispatch("cache/get",{key:v(v({},I),{},{id:k,keyType:"illustration"})});case 14:if(!(P=t.sent)){t.next=19;break}x=P,t.next=23;break;case 19:return t.next=21,n.$illustrationsRepository.show(k,I);case 21:x=t.sent,d.dispatch("cache/set",{key:v(v({},I),{},{id:k,keyType:"illustration"}),value:x});case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(11),console.error(t.t0);case 28:return _=/--animated$/.test(r.id),k!==x.pretty_id&&y(301,"/illustrations/illustration/".concat(x.pretty_id).concat(_?"--animated":"")),C="OUCH_V2.SEO.ILLUSTRATION_PAGE.TITLE".concat(_?"_ANIMATED":""),style=null===(m=x)||void 0===m||null===(O=m.styles)||void 0===O||null===(S=O[0])||void 0===S?void 0:S.title,E=x.heading||"Illustration",T={heading:E.toLowerCase()},style&&(T.styles=style.toLowerCase()),d.dispatch("updateSEO",{title:n.i18n.t(C,{heading:Object(l.a)(E)}),description:n.i18n.t("OUCH_V2.SEO.ILLUSTRATION_PAGE.DESCRIPTION",T),image:(null===(w=x)||void 0===w||null===(j=w.og_preview1x)||void 0===j?void 0:j.url)||"".concat("https://maxst.icons8.com","/vue-static/ouch/seo/opengraph.png")}),t.abrupt("return",{illustration:x,secret:f,showInitAnimated:_});case 39:t.prev=39,t.t1=t.catch(3),console.error(t.t1),d.commit("HREFLANG_DELETE"),o({statusCode:404,message:"Whoops, couldn't find illustration with this id"});case 44:case"end":return t.stop()}}),t,null,[[3,39],[11,25]])})))()},data:function(){return{locale:this.$i18n.localeProperties.iso,illustration:null,secret:""}},mounted:function(){this.getSimilarsAndRelated()}},h=r(2),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"illustration-page"},[t("ouch-full-illustration",{attrs:{"has-full-info":"",illustration:e.illustration,"content-loading":e.gettingSameStyleIllustrations||e.gettingRelatedStyles,sameStyleIllustrations:e.sameStyleIllustrations,totalSameStyle:e.totalSameStyle,illustrationPage:!0,secret:e.secret,relatedStyles:e.relatedCategories,totalRelatedStyles:e.totalRelatedCategories,"show-init-animated":e.showInitAnimated}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);